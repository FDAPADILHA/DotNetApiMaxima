{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nlet PessoasComponent = class PessoasComponent {\n  constructor(pessoasService, modalService) {\n    this.pessoasService = pessoasService;\n    this.modalService = modalService;\n    this.visibilidadeTabela = true;\n    this.visibilidadeFormulario = false;\n  }\n  ngOnInit() {\n    this.pessoasService.PegarTodos().subscribe(resultado => {\n      this.pessoas = resultado;\n    });\n  }\n  ExibirFormularioCadastro() {\n    this.visibilidadeTabela = false;\n    this.visibilidadeFormulario = true;\n    this.tituloFormulario = 'Nova Pessoa';\n    this.formulario = new FormGroup({\n      nome: new FormControl(null),\n      sobrenome: new FormControl(null),\n      idade: new FormControl(null),\n      profissao: new FormControl(null)\n    });\n  }\n  ExibirFormularioAtualizacao(pessoaId) {\n    this.visibilidadeTabela = false;\n    this.visibilidadeFormulario = true;\n    this.pessoasService.PegarPeloId(pessoaId).subscribe(resultado => {\n      this.tituloFormulario = `Atualizar ${resultado.nome} ${resultado.sobrenome}`;\n      this.formulario = new FormGroup({\n        pessoaId: new FormControl(resultado.pessoaId),\n        nome: new FormControl(resultado.nome),\n        sobrenome: new FormControl(resultado.sobrenome),\n        idade: new FormControl(resultado.idade),\n        profissao: new FormControl(resultado.profissao)\n      });\n    });\n  }\n  EnviarFormulario() {\n    const pessoa = this.formulario.value;\n    if (pessoa.pessoaId > 0) {\n      this.pessoasService.AtualizarPessoa(pessoa).subscribe(resultado => {\n        this.visibilidadeFormulario = false;\n        this.visibilidadeTabela = true;\n        alert('Pessoa atualizada com sucesso');\n        this.pessoasService.PegarTodos().subscribe(registros => {\n          this.pessoas = registros;\n        });\n      });\n    } else {\n      this.pessoasService.SalvarPessoa(pessoa).subscribe(resultado => {\n        this.visibilidadeFormulario = false;\n        this.visibilidadeTabela = true;\n        alert('Pessoa inserida com sucesso');\n        this.pessoasService.PegarTodos().subscribe(registros => {\n          this.pessoas = registros;\n        });\n      });\n    }\n  }\n  Voltar() {\n    this.visibilidadeTabela = true;\n    this.visibilidadeFormulario = false;\n  }\n  ExibirConfirmacaoExclusao(pessoaId, nomePessoa, conteudoModal) {\n    this.modalRef = this.modalService.show(conteudoModal);\n    this.pessoaId = pessoaId;\n    this.nomePessoa = nomePessoa;\n  }\n  ExcluirPessoa(pessoaId) {\n    this.pessoasService.ExcluirPessoa(pessoaId).subscribe(resultado => {\n      this.modalRef.hide();\n      alert('Pessoa excluÃ­da com sucesso');\n      this.pessoasService.PegarTodos().subscribe(registros => {\n        this.pessoas = registros;\n      });\n    });\n  }\n};\nPessoasComponent = __decorate([Component({\n  selector: 'app-pessoas',\n  templateUrl: './pessoas.component.html',\n  styleUrls: ['./pessoas.component.css']\n})], PessoasComponent);\nexport { PessoasComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}